import{r as c,m as f,j as b,a as w,c as S,i as x,p as k,d as _,n as g,t as N,b as V,q as j,s as a}from"./index.dr_MLmGy.js";import{u as h,t as r,L as q}from"./Loading.LpN-aEZD.js";/* empty css                        */import{_ as B}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./index.YRG6quR3.js";const F={__name:"Newsletter",props:{type:{type:String,required:!1,default:"mailchimp"},list_id:String},setup(m,{expose:i}){i();const n=m,e=c(!1),o=c(null),t=f({email:""}),l={email:[{type:"email",required:!0}]},{pass:d,isFinished:u,errorFields:y}=h(t,l),v=b(()=>!e.value&&u.value&&d.value),p={props:n,loading:e,message:o,form:t,rules:l,pass:d,isFinished:u,errorFields:y,canSubmit:v,submit:()=>{n.type==="mailchimp"&&(e.value=!0,fetch("/api/subscribe-mailchimp",{method:"POST",body:JSON.stringify({email:t.email}),headers:{"Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{s.status==="pending"?(a.success(r("newsletter_thanks")),t.email=""):s.status==="Member Exists"?(a.info(r("newsletter_already_subscribed")),t.email=""):a.error(r("newsletter_error"))}).catch(s=>{o.value=r("newsletter_error"),a.error(r("newsletter_error"))}).finally(()=>{e.value=!1}))},ref:c,computed:b,reactive:f,get t(){return r},get useAsyncValidator(){return h},Loading:q,get toast(){return a}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},L=["placeholder"],M=["disabled"];function O(m,i,n,e,o,t){return w(),S("form",{name:"newsletter-subscribes",class:"relative inline-flex items-center gap-4 py-4",onSubmit:j(e.submit,["prevent"])},[x(_("input",{type:"email",placeholder:e.t("email"),"onUpdate:modelValue":i[0]||(i[0]=l=>e.form.email=l),class:g(["relative block overflow-hidden rounded-full bg-dark px-5 py-2",e.errorFields?.email?.length?"text-warning":"text-light"])},null,10,L),[[k,e.form.email]]),_("button",{type:"submit",disabled:!e.canSubmit,class:g(["btn",e.canSubmit?"surface-primary":"surface-base opacity-50"])},N(e.t("subscribe")),11,M),V(e.Loading,{loading:e.loading},null,8,["loading"])],32)}const z=B(F,[["render",O]]);export{z as default};
